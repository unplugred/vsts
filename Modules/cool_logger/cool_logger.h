/* cool logger created by me, unplugred.  */

#pragma once
#if 0

BEGIN_JUCE_MODULE_DECLARATION

	ID:				cool_logger
	vendor:			unplugred
	version:		1.0.0
	name:			cool_logger
	description:	cool logger
	license:		GPL3
	dependencies:	juce_opengl

END_JUCE_MODULE_DECLARATION

#endif

#include <juce_opengl/juce_opengl.h>

using namespace juce;
using namespace gl;

#define CONSOLE_LENGTH 20

class CoolFont {
public:
	void init(OpenGLContext* context, float bannero, int w, int h, float _dpi, Image image, int texw, int texh, int lineh = 16, bool is_mono = false, int monow = 8, int monoh = 16, String vert = "", String frag = "");
	OpenGLTexture tex;
	std::unique_ptr<OpenGLShaderProgram> shader;
	OpenGLContext* context;
	void drawstring(float fgr, float fgg, float fgb, float fga, float bgr, float bgg, float bgb, float bga, String txty, int channel = 0, float x = .5f, float y = .5f, float xa = .5f, float ya = .5f);
	void release();
	int width = 100;
	int height = 100;
	int monowidth = 8;
	int monoheight = 16;
	int lineheight = 16;
	int texwidth = 128;
	int texheight = 256;
	bool mono = true;
	bool smooth = false;
	float scale = 1;
	float slant = 0;
	float banneroffset = 0;
	float dpi = 0;
	std::vector<std::vector<std::vector<int>>> uvmap;
	std::vector<std::vector<std::vector<int>>> kerning;
	bool inframebuffer = false;

private:
	void drawstringmono(float fgr, float fgg, float fgb, float fga, float bgr, float bgg, float bgb, float bga, String txty, int channel = 0, float x = .5f, float y = .5f, float xa = .5f, float ya = .5f);
	int finduvindex(int letter, int channel = 0);
};

class CoolLogger {
public:
	void init(OpenGLContext* context, float bannero, int w, int h);
	void debug(String str, bool timestamp = true);
	void debug(int str, bool timestamp = true);
	void debug(float str, bool timestamp = true);
	void debug(double str, bool timestamp = true);
	void debug(bool str, bool timestamp = true);
	void drawlog();
	CoolFont font;

private:

	const int dbg_txt_pngSize = 1827;
	const unsigned char dbg_txt_png[1829] =
	{ 137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,128,0,0,1,0,1,0,0,0,0,83,130,67,10,0,0,6,234,73,68,65,84,120,218,189,215,1,132,20,81,24,7,240,127,219,168,41,87,125,37,181,145,238,201,200,148,212,150,240,100,213,244,124,178,229,144,92,36,33,57,21,
	194,73,180,178,174,233,25,185,146,100,37,21,148,20,28,0,136,196,169,4,2,16,170,72,162,64,29,32,100,182,239,123,123,119,91,85,85,81,255,121,179,51,253,250,222,247,222,91,88,135,111,83,175,31,37,75,232,200,5,170,9,184,145,119,211,80,181,2,167,59,165,181,
	86,97,129,173,174,163,30,212,31,204,228,229,171,218,192,237,103,101,171,108,85,223,28,186,58,155,23,111,108,77,66,89,127,224,238,205,227,69,107,56,76,145,40,44,227,69,171,30,41,104,133,78,105,218,69,43,89,167,180,4,180,233,40,209,74,233,113,245,77,203,
	62,121,162,203,10,188,106,235,20,107,137,2,180,232,62,233,78,45,77,2,13,207,15,103,33,106,181,20,134,233,64,31,254,38,121,133,146,83,77,104,223,110,198,103,217,228,86,1,107,167,224,229,252,65,133,193,193,41,152,88,209,78,110,101,104,183,41,238,210,135,
	45,148,220,178,218,35,50,72,4,62,142,80,50,52,164,80,201,224,168,68,89,82,146,12,42,116,58,121,71,64,43,146,129,110,69,238,108,43,244,72,108,171,173,61,114,121,209,85,144,68,173,65,106,199,148,163,101,117,31,72,42,45,75,131,128,66,216,105,226,64,100,
	21,74,10,103,73,234,242,70,64,71,225,55,66,12,2,40,202,160,169,0,244,46,181,7,173,141,205,52,112,58,216,102,34,234,193,218,246,165,105,136,4,96,5,96,98,166,41,56,178,235,72,42,144,42,196,10,105,45,38,1,219,131,42,213,4,202,18,35,32,133,181,139,151,236,
	158,170,8,96,23,173,62,55,213,195,64,114,164,29,128,167,33,109,239,40,4,160,201,66,211,193,237,59,65,97,182,233,130,197,134,41,200,161,9,27,48,225,169,208,141,30,223,224,123,177,213,154,173,54,109,105,45,52,85,112,218,224,106,198,21,230,0,9,184,81,112,
	154,21,17,123,61,123,230,224,227,34,74,179,60,64,12,83,17,136,162,116,111,30,179,175,86,9,164,16,199,141,161,59,177,21,48,101,28,41,84,27,252,144,120,187,30,36,138,5,40,106,68,158,252,102,192,32,86,48,149,81,133,10,64,37,145,130,23,48,10,49,12,129,227,
	204,151,44,208,221,7,4,114,142,153,13,115,181,26,14,110,227,143,54,182,214,88,59,9,232,37,198,87,33,124,55,150,134,109,179,181,197,22,54,114,198,23,54,124,31,156,25,46,40,98,243,232,33,195,167,236,4,252,36,120,92,99,246,46,51,185,64,195,140,221,242,24,
	99,206,191,130,70,128,143,20,237,50,109,5,223,204,93,179,126,65,42,142,152,246,37,133,48,197,135,41,94,161,116,83,192,1,46,123,231,123,112,222,35,247,78,247,113,166,160,194,5,96,207,44,176,179,160,81,129,130,97,125,83,206,98,54,22,118,216,109,209,179,
	252,81,234,121,147,0,233,208,44,157,151,140,152,60,78,1,102,46,72,128,125,69,128,1,217,86,23,56,50,89,236,3,100,10,41,199,2,8,96,4,218,10,166,11,76,10,148,82,23,216,55,99,114,28,128,20,154,190,17,41,104,65,128,172,205,126,10,226,0,231,20,210,49,166,108,
	10,156,2,43,68,1,216,49,57,146,178,124,18,54,59,75,117,133,210,84,20,208,203,55,80,71,19,37,12,50,68,152,133,140,226,140,148,41,192,156,30,196,10,129,209,5,216,204,70,150,162,0,183,246,91,128,247,242,38,110,109,218,79,177,163,167,7,89,96,136,7,60,13,
	28,164,152,169,237,60,16,185,188,240,84,56,138,27,93,88,62,13,187,186,144,8,148,1,142,116,129,5,242,207,167,20,211,192,83,192,133,172,210,131,243,178,44,211,38,1,39,192,192,177,189,118,147,236,212,209,168,130,197,100,70,117,124,158,97,29,95,39,134,57,
	128,16,154,124,16,181,191,0,67,113,31,176,119,147,169,183,10,127,218,159,30,17,16,30,26,88,235,40,64,165,11,174,216,24,128,79,71,83,176,210,80,193,167,121,91,100,16,131,4,12,9,180,83,23,103,136,186,16,11,236,166,149,164,144,42,68,84,164,187,211,149,70,
	167,4,168,8,236,227,197,70,155,178,130,19,72,120,113,22,64,246,33,48,64,137,143,115,5,31,118,58,127,147,66,169,80,34,139,208,13,233,225,128,30,28,208,227,227,155,16,234,250,129,26,40,252,75,247,129,190,20,227,13,200,7,210,113,38,228,92,99,174,53,192,
	225,9,32,199,56,208,167,111,125,50,136,4,66,44,66,210,20,121,97,53,44,119,173,86,11,192,154,92,110,34,98,61,156,143,36,185,247,190,11,245,162,172,75,184,44,75,129,86,11,113,161,213,108,243,60,239,86,68,133,47,36,213,233,41,179,10,62,47,233,155,110,218,
	58,105,143,73,154,54,68,224,47,210,135,126,2,100,48,211,44,255,18,168,97,117,138,241,116,28,162,115,248,34,244,107,97,174,201,5,216,56,149,10,160,33,243,228,178,126,48,166,188,138,242,144,128,134,253,197,152,238,36,112,171,207,201,134,138,66,182,126,
	113,121,121,209,32,91,86,50,115,23,98,34,131,198,178,115,242,62,13,195,104,142,140,246,160,92,42,21,87,186,176,221,251,193,35,20,75,143,73,216,236,189,189,66,179,12,220,165,179,161,105,133,153,174,208,12,131,242,240,117,89,246,228,201,200,90,58,68,243,
	135,127,252,227,50,140,159,102,104,184,70,64,150,209,162,139,232,147,12,93,137,27,2,227,227,10,53,201,21,52,11,0,206,33,105,96,92,2,63,90,16,192,172,16,114,127,84,167,52,26,212,72,96,107,182,120,126,243,184,54,221,181,75,129,137,139,131,55,1,211,233,
	172,77,232,226,34,68,228,11,215,254,248,49,203,103,236,30,208,138,122,0,32,207,103,248,75,86,128,21,206,1,62,159,17,37,86,86,41,122,16,7,56,47,77,221,25,128,243,25,180,197,202,78,143,89,123,210,121,192,230,51,86,68,36,240,235,240,216,11,34,74,129,52,
	149,65,192,232,158,119,95,194,194,177,19,95,194,202,61,119,63,135,223,238,49,145,98,226,109,250,225,109,58,209,237,49,65,111,63,80,156,198,241,7,154,208,30,90,145,74,197,219,15,152,160,169,30,169,140,20,0,105,143,47,64,123,124,9,161,71,15,254,170,7,201,
	128,10,194,245,79,161,63,93,191,245,125,103,125,231,125,7,253,157,142,12,90,111,12,96,16,66,161,98,171,252,183,86,76,2,133,6,250,241,159,64,7,233,77,232,96,98,65,231,31,129,140,254,126,121,76,129,92,91,137,182,118,104,162,191,11,232,164,232,239,79,165,
	144,58,157,137,5,0,40,213,59,165,255,12,191,142,45,81,2,104,85,109,29,149,21,85,128,29,156,0,37,236,80,49,73,0,163,224,188,65,61,115,56,200,217,136,25,121,124,200,58,79,204,2,237,189,217,45,26,229,43,236,124,125,236,156,192,37,206,146,184,96,226,17,239,
	218,237,17,135,81,151,37,164,224,20,178,46,24,1,235,216,141,221,212,41,147,64,2,221,166,46,99,87,12,17,37,169,67,211,200,178,251,95,110,47,155,251,168,85,125,87,71,190,194,1,25,36,25,65,147,3,61,248,121,8,95,38,18,168,2,179,39,14,76,194,92,129,68,188,
	113,49,148,143,207,34,50,93,48,22,40,169,86,37,162,141,85,133,76,0,212,119,128,40,30,128,194,132,66,89,201,123,127,254,233,148,80,81,246,0,161,7,54,162,26,96,122,149,1,212,167,166,168,105,147,122,245,117,0,132,159,226,24,168,86,19,133,16,186,1,205,226,
	30,100,208,244,125,115,216,239,194,39,229,2,41,228,143,205,163,118,0,0,0,0,73,69,78,68,174,66,96,130,0,0 };
	String debuglist[CONSOLE_LENGTH];
	int debugreadpos = 0;
	std::mutex debugmutex;
	String debugtxt = "";
};